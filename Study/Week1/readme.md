# Week1 学习总结 - 数据处理与加载优化

## 1. 数据处理

### 1.1 HuggingFace Datasets 数据加载与处理教程
- 数据加载，数据清洗，过滤，标签转换。
- 示例：将数据处理成 lucaprot 可使用的格式。

### 1.2 lucaprot 如何处理数据集
![lucaprot 数据集处理](./image/image.png)

## 2. 数据加载与内存优化

### 2.1 HuggingFace 大内存加载
- **内存映射 (memory-mapped)**：解放内存管理问题。
- **流式处理 (streaming)**：摆脱硬盘限制。

### 2.2 lucaprot 加载
- 处理方式过于复杂，在前期学习中可以暂时忽略。


## 3. 遇到其他的问题 思考以及解决方案。但没有经过实际测试，暂时以扩充知识为主。

### 3.1 训练与推理的不同
- **训练**：学习。
- **特点**：显存占用高，策略是切碎学习。  

- **推理**：使用。
- **特点**：显存占用低，策略是拼完整。

### 3.2 对于长序列的处理

#### 3.2.1 参考 ESM3
- **连续随机裁剪 (Contiguous Cropping)**：将训练序列长度限制在 512 或 1024。

#### 3.2.2 长序列处理
- 开启 Gradient Checkpointing。
- 配合使用 Gradient Accumulation（Batch Size 设为 1，累积 32 步更新一次）。
